# Memory Bank å¿«é€Ÿå¼€å§‹æŒ‡å—

## 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### æ­¥éª¤1ï¼šåˆå§‹åŒ– Memory Bankï¼ˆ30ç§’ï¼‰

æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ`Cmd/Ctrl + Shift + P`ï¼‰ï¼Œè¾“å…¥ï¼š

```
Memory Bank: åˆå§‹åŒ–é¡¹ç›®è®°å¿†åº“
```

è¿™å°†åœ¨ä½ çš„é¡¹ç›®ä¸­åˆ›å»º `.zhikai/memory-bank/` ç›®å½•ç»“æ„ã€‚

### æ­¥éª¤2ï¼šå­¦ä¹ é¡¹ç›®ï¼ˆ2åˆ†é’Ÿï¼‰

ç»§ç»­åœ¨å‘½ä»¤é¢æ¿ä¸­æ‰§è¡Œï¼š

```
Memory Bank: å­¦ä¹ é¡¹ç›®ç»“æ„
```

ç„¶åæ‰§è¡Œï¼š

```
Memory Bank: å­¦ä¹ ç¼–ç è§„èŒƒ
```

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†æä½ çš„é¡¹ç›®ï¼Œæå–é¡¹ç›®ç»“æ„ã€æŠ€æœ¯æ ˆã€ç¼–ç è§„èŒƒç­‰ä¿¡æ¯ã€‚

### æ­¥éª¤3ï¼šæŸ¥çœ‹å­¦ä¹ ç»“æœï¼ˆ1åˆ†é’Ÿï¼‰

æ‰§è¡Œå‘½ä»¤ï¼š

```
Memory Bank: æŸ¥çœ‹æ‰€æœ‰è®°å¿†
```

ä½ ä¼šçœ‹åˆ°ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„è®°å¿†æ¡ç›®åˆ—è¡¨ã€‚

### æ­¥éª¤4ï¼šç”Ÿæˆä¸Šä¸‹æ–‡æ‘˜è¦ï¼ˆ1åˆ†é’Ÿï¼‰

æ‰§è¡Œå‘½ä»¤ï¼š

```
Memory Bank: ç”Ÿæˆé¡¹ç›®ä¸Šä¸‹æ–‡æ‘˜è¦
```

æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œä½ ä¼šçœ‹åˆ°å®Œæ•´çš„é¡¹ç›®ä¸Šä¸‹æ–‡æ‘˜è¦ï¼Œè¿™äº›å†…å®¹ä¼šåœ¨ AI ä»£ç ç”Ÿæˆæ—¶è‡ªåŠ¨ä½¿ç”¨ã€‚

### æ­¥éª¤5ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨ï¼ˆ30ç§’ï¼‰

ç°åœ¨ï¼Œå½“ä½ ä½¿ç”¨ AI ç”Ÿæˆä»£ç æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¼•ç”¨è¿™äº›è®°å¿†ï¼Œç”Ÿæˆç¬¦åˆé¡¹ç›®è§„èŒƒçš„ä»£ç ï¼

## æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ Memory Bankï¼Ÿ

Memory Bank æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„é¡¹ç›®å­¦ä¹ ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ï¼š

1. **è‡ªåŠ¨å­¦ä¹ **ï¼šåˆ†æé¡¹ç›®ä»£ç ï¼Œæå–ç»“æ„ã€è§„èŒƒã€æ¨¡å¼
2. **è®°å¿†å­˜å‚¨**ï¼šå°†å­¦ä¹ ç»“æœå­˜å‚¨ä¸ºç»“æ„åŒ–çš„è®°å¿†æ¡ç›®
3. **AI å¢å¼º**ï¼šåœ¨ AI ä»£ç ç”Ÿæˆæ—¶è‡ªåŠ¨å¼•ç”¨è¿™äº›è®°å¿†ï¼Œç¡®ä¿ç”Ÿæˆçš„ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ

### è®°å¿†ç±»åˆ«

- **æ¶æ„è®¾è®¡** (`architecture`)ï¼šé¡¹ç›®æ¶æ„ã€æŠ€æœ¯æ ˆã€è®¾è®¡æ¨¡å¼
- **ç¼–ç è§„èŒƒ** (`coding-style`)ï¼šä»£ç é£æ ¼ã€å‘½åè§„èŒƒã€æ³¨é‡Šè§„èŒƒ
- **é¡¹ç›®ç»“æ„** (`project-structure`)ï¼šç›®å½•ç»“æ„ã€æ–‡ä»¶ç»„ç»‡
- **ä¾èµ–å…³ç³»** (`dependencies`)ï¼šé¡¹ç›®ä¾èµ–ã€ç‰ˆæœ¬ç®¡ç†
- **æœ€ä½³å®è·µ** (`best-practices`)ï¼šå¼€å‘è§„èŒƒã€ä»£ç è´¨é‡
- **å¸¸ç”¨æ¨¡å¼** (`common-patterns`)ï¼šè®¾è®¡æ¨¡å¼ã€API æ¨¡å¼
- **è‡ªå®šä¹‰** (`custom`)ï¼šä½ è‡ªå·±æ·»åŠ çš„è®°å¿†

## å¸¸ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæ–°é¡¹ç›®æ¥å…¥

```bash
# 1. åˆå§‹åŒ–
Memory Bank: åˆå§‹åŒ–é¡¹ç›®è®°å¿†åº“

# 2. ä¸€é”®å­¦ä¹ ï¼ˆå¦‚æœä½ æœ‰å¢å¼ºç‰ˆï¼‰
# æˆ–è€…æ‰‹åŠ¨å­¦ä¹ 
Memory Bank: å­¦ä¹ é¡¹ç›®ç»“æ„
Memory Bank: å­¦ä¹ ç¼–ç è§„èŒƒ

# 3. éªŒè¯
Memory Bank: æŸ¥çœ‹æ‰€æœ‰è®°å¿†
```

### åœºæ™¯2ï¼šæ·»åŠ è‡ªå®šä¹‰è§„èŒƒ

```bash
# æ‰“å¼€å‘½ä»¤é¢æ¿
Memory Bank: æ·»åŠ è‡ªå®šä¹‰è®°å¿†

# æŒ‰æç¤ºè¾“å…¥
æ ‡é¢˜: API å“åº”æ ¼å¼è§„èŒƒ
å†…å®¹: ç»Ÿä¸€ä½¿ç”¨ { code: 200, message: 'success', data: {...} }
ç±»åˆ«: æœ€ä½³å®è·µ
æ ‡ç­¾: api, response, standard
```

### åœºæ™¯3ï¼šAI ä»£ç ç”Ÿæˆ

Memory Bank ä¼šè‡ªåŠ¨å·¥ä½œï¼å½“ä½ ä½¿ç”¨ AI ç”Ÿæˆä»£ç æ—¶ï¼š

```typescript
// åœ¨ä½ çš„ AI æœåŠ¡ä¸­
const integration = new MemoryBankAIIntegration(memoryBankService, aiService);

// ç”Ÿæˆä»£ç æ—¶ä¼šè‡ªåŠ¨å¼•ç”¨é¡¹ç›®è®°å¿†
const code = await integration.generateContextAwareCode(
    workspaceUri,
    'åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç† Controller',
    'controller'
);

// ç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨éµå¾ªé¡¹ç›®è§„èŒƒï¼
```

## ä»£ç é›†æˆç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```typescript
import { IMemoryBankService } from 'vs/workbench/services/memoryBank/common/memoryBank';

// é€šè¿‡ä¾èµ–æ³¨å…¥è·å–æœåŠ¡
constructor(
    @IMemoryBankService private readonly memoryBankService: IMemoryBankService
) {}

// ä½¿ç”¨
async initializeProject(workspaceUri: URI) {
    // åˆå§‹åŒ–
    await this.memoryBankService.initialize(workspaceUri);

    // å­¦ä¹ é¡¹ç›®
    await this.memoryBankService.learnProjectStructure(workspaceUri);

    // è·å–è®°å¿†
    const memories = await this.memoryBankService.getAllEntries(workspaceUri);
    console.log(`å­¦åˆ° ${memories.length} æ¡è®°å¿†`);
}
```

### é«˜çº§ä½¿ç”¨

```typescript
import { MemoryBankEnhancedFeatures } from 'vs/workbench/services/memoryBank/browser/memoryBankEnhanced';
import { MemoryBankAIIntegration } from 'vs/workbench/contrib/memoryBank/browser/memoryBankIntegration';

// åˆ›å»ºå¢å¼ºåŠŸèƒ½
const enhanced = new MemoryBankEnhancedFeatures(
    memoryBankService,
    fileService,
    projectAnalyzer,
    aiService
);

// ä¸€é”®å­¦ä¹ æ•´ä¸ªé¡¹ç›®
await enhanced.autoLearnProject(workspaceUri);

// åˆ›å»º AI é›†æˆ
const integration = new MemoryBankAIIntegration(memoryBankService, aiService);

// ç”Ÿæˆä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ä»£ç 
const code = await integration.generateContextAwareCode(
    workspaceUri,
    'åˆ›å»ºè®¢å•æœåŠ¡ï¼ŒåŒ…å«åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€å–æ¶ˆåŠŸèƒ½',
    'service'
);
```

## æ–‡ä»¶ç»“æ„

åˆå§‹åŒ–åï¼Œä½ çš„é¡¹ç›®ä¼šæœ‰ä»¥ä¸‹ç»“æ„ï¼š

```
your-project/
â”œâ”€â”€ .zhikai/
â”‚   â””â”€â”€ memory-bank/
â”‚       â”œâ”€â”€ architecture/          # æ¶æ„è®¾è®¡è®°å¿†
â”‚       â”‚   â””â”€â”€ tech-stack.md
â”‚       â”œâ”€â”€ coding-style/          # ç¼–ç è§„èŒƒè®°å¿†
â”‚       â”‚   â””â”€â”€ style-guide.md
â”‚       â”œâ”€â”€ project-structure/     # é¡¹ç›®ç»“æ„è®°å¿†
â”‚       â”‚   â””â”€â”€ structure.md
â”‚       â”œâ”€â”€ dependencies/          # ä¾èµ–å…³ç³»è®°å¿†
â”‚       â”‚   â””â”€â”€ deps-analysis.md
â”‚       â”œâ”€â”€ best-practices/        # æœ€ä½³å®è·µè®°å¿†
â”‚       â”‚   â””â”€â”€ practices.md
â”‚       â”œâ”€â”€ common-patterns/       # å¸¸ç”¨æ¨¡å¼è®°å¿†
â”‚       â”‚   â””â”€â”€ patterns.md
â”‚       â”œâ”€â”€ custom/                # è‡ªå®šä¹‰è®°å¿†
â”‚       â”‚   â””â”€â”€ your-memories.md
â”‚       â””â”€â”€ README.md              # è¯´æ˜æ–‡æ¡£
â””â”€â”€ ... (ä½ çš„é¡¹ç›®æ–‡ä»¶)
```

## è®°å¿†æ–‡ä»¶ç¤ºä¾‹

æ¯ä¸ªè®°å¿†æ–‡ä»¶éƒ½æ˜¯ Markdown æ ¼å¼ï¼š

```markdown
---
id: abc123
title: é¡¹ç›®ç»“æ„
category: project-structure
tags: structure, auto-generated, spring-boot
created: 2025-01-14T00:00:00.000Z
updated: 2025-01-14T00:00:00.000Z
---

# é¡¹ç›®ç»“æ„

## é¡¹ç›®ç±»å‹
spring-boot

## æ¡†æ¶
Spring Boot 3.x

## ç›®å½•ç»“æ„
- æºç : src/main/java
- èµ„æº: src/main/resources
- æµ‹è¯•: src/test/java

## ä¸»è¦æ¨¡å—
- controller: REST API æ§åˆ¶å™¨
- service: ä¸šåŠ¡é€»è¾‘å±‚
- repository: æ•°æ®è®¿é—®å±‚
- model: æ•°æ®æ¨¡å‹
```

## æœ€ä½³å®è·µ

### 1. å®šæœŸæ›´æ–°

é¡¹ç›®ç»“æ„å˜åŒ–åï¼Œé‡æ–°è¿è¡Œå­¦ä¹ å‘½ä»¤ï¼š

```bash
Memory Bank: å­¦ä¹ é¡¹ç›®ç»“æ„
```

### 2. æ·»åŠ å›¢é˜Ÿè§„èŒƒ

å°†å›¢é˜Ÿçš„å¼€å‘è§„èŒƒæ·»åŠ åˆ° Memory Bankï¼š

```bash
Memory Bank: æ·»åŠ è‡ªå®šä¹‰è®°å¿†
```

### 3. ç‰ˆæœ¬æ§åˆ¶

å°† `.zhikai/memory-bank/` æäº¤åˆ° Gitï¼Œè®©å›¢é˜Ÿå…±äº«è®°å¿†ï¼š

```bash
git add .zhikai/memory-bank/
git commit -m "Add project memory bank"
git push
```

### 4. ä¸ªäººè®°å¿†

å¦‚æœæœ‰ä¸ªäººçš„è®°å¿†ä¸æƒ³å…±äº«ï¼Œæ·»åŠ åˆ° `.gitignore`ï¼š

```
.zhikai/memory-bank/custom/
```

## å¸¸è§é—®é¢˜

### Q1: Memory Bank å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ

A: å­˜å‚¨åœ¨é¡¹ç›®çš„ `.zhikai/memory-bank/` ç›®å½•ä¸‹ã€‚

### Q2: ä¼šå½±å“é¡¹ç›®æ€§èƒ½å—ï¼Ÿ

A: ä¸ä¼šã€‚Memory Bank åªåœ¨ä½ ä¸»åŠ¨è°ƒç”¨æ—¶å·¥ä½œï¼Œä¸ä¼šå½±å“æ—¥å¸¸å¼€å‘ã€‚

### Q3: å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘è®°å¿†æ–‡ä»¶å—ï¼Ÿ

A: å¯ä»¥ï¼è®°å¿†æ–‡ä»¶æ˜¯æ™®é€šçš„ Markdown æ–‡ä»¶ï¼Œä½ å¯ä»¥ç›´æ¥ç¼–è¾‘ã€‚

### Q4: å¦‚ä½•åˆ é™¤è®°å¿†ï¼Ÿ

A: å¯ä»¥ç›´æ¥åˆ é™¤å¯¹åº”çš„ `.md` æ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ APIï¼š

```typescript
await memoryBankService.deleteEntry(workspaceUri, memoryId);
```

### Q5: AI ä¸€å®šä¼šä½¿ç”¨è¿™äº›è®°å¿†å—ï¼Ÿ

A: æ˜¯çš„ï¼Œå½“ä½ ä½¿ç”¨ `MemoryBankAIIntegration` ç”Ÿæˆä»£ç æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†ç›¸å…³è®°å¿†æ·»åŠ åˆ° AI prompt ä¸­ã€‚

## ä¸‹ä¸€æ­¥

### äº†è§£æ›´å¤š

- ğŸ“– [å®Œæ•´ç”¨æˆ·æŒ‡å—](./MEMORY_BANK_GUIDE.md)
- ğŸ—ï¸ [å®ç°æ–‡æ¡£](./MEMORY_BANK_IMPLEMENTATION.md)
- ğŸ’» [ä»£ç ç¤ºä¾‹](./src/vs/workbench/contrib/memoryBank/browser/memoryBankExample.ts)

### æ ¸å¿ƒæ–‡ä»¶

- æœåŠ¡å®ç°ï¼š`src/vs/workbench/services/memoryBank/browser/memoryBankService.ts`
- å¢å¼ºåŠŸèƒ½ï¼š`src/vs/workbench/services/memoryBank/browser/memoryBankEnhanced.ts`
- AI é›†æˆï¼š`src/vs/workbench/contrib/memoryBank/browser/memoryBankIntegration.ts`
- å‘½ä»¤æ³¨å†Œï¼š`src/vs/workbench/contrib/memoryBank/browser/memoryBankActions.ts`

## ç«‹å³å¼€å§‹

æ‰“å¼€ä½ çš„é¡¹ç›®ï¼ŒæŒ‰ `Cmd/Ctrl + Shift + P`ï¼Œè¾“å…¥ï¼š

```
Memory Bank: åˆå§‹åŒ–é¡¹ç›®è®°å¿†åº“
```

å¼€å§‹ä½ çš„æ™ºèƒ½é¡¹ç›®å­¦ä¹ ä¹‹æ—…ï¼ğŸš€

## è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹[å®Œæ•´æ–‡æ¡£](./MEMORY_BANK_GUIDE.md)
2. æŸ¥çœ‹[å®ç°ç»†èŠ‚](./MEMORY_BANK_IMPLEMENTATION.md)
3. æŸ¥çœ‹[ä»£ç ç¤ºä¾‹](./src/vs/workbench/contrib/memoryBank/browser/memoryBankExample.ts)
4. æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯

## åé¦ˆå’Œè´¡çŒ®

æ¬¢è¿æä¾›åé¦ˆå’Œæ”¹è¿›å»ºè®®ï¼
